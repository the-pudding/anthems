import{t as P,a as Y}from"./index.22e08420.js";import{Y as q}from"./scheduler.b229e728.js";function F(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function G(e,t){P(e,1,1,()=>{t.delete(e.key)})}function H(e,t,s,i,a,k,d,O,M,S,p,A){let u=e.length,h=k.length,o=u;const w={};for(;o--;)w[e[o].key]=o;const l=[],g=new Map,y=new Map,N=[];for(o=h;o--;){const n=A(a,k,o),c=s(n);let f=d.get(c);f?i&&N.push(()=>f.p(n,t)):(f=S(c,n),f.c()),g.set(c,l[o]=f),c in w&&y.set(c,Math.abs(o-w[c]))}const j=new Set,x=new Set;function m(n){Y(n,1),n.m(O,p),d.set(n.key,n),p=n.first,h--}for(;u&&h;){const n=l[h-1],c=e[u-1],f=n.key,r=c.key;n===c?(p=n.first,u--,h--):g.has(r)?!d.has(f)||j.has(f)?m(n):x.has(r)?u--:y.get(f)>y.get(r)?(x.add(f),m(n)):(j.add(r),u--):(M(c,d),u--)}for(;u--;){const n=e[u];g.has(n.key)||M(n,d)}for(;h;)m(l[h-1]);return q(N),l}function J(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}class K extends Map{constructor(t,s=C){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),t!=null)for(const[i,a]of t)this.set(i,a)}get(t){return super.get(I(this,t))}has(t){return super.has(I(this,t))}set(t,s){return super.set(z(this,t),s)}delete(t){return super.delete(B(this,t))}}function I({_intern:e,_key:t},s){const i=t(s);return e.has(i)?e.get(i):s}function z({_intern:e,_key:t},s){const i=t(s);return e.has(i)?e.get(i):(e.set(i,s),s)}function B({_intern:e,_key:t},s){const i=t(s);return e.has(i)&&(s=e.get(i),e.delete(i)),s}function C(e){return e!==null&&typeof e=="object"?e.valueOf():e}export{K as I,J as d,F as e,G as o,H as u};
